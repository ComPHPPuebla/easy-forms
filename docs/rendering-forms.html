<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Easy form handling for PHP</title>

        <link rel="stylesheet" href="http://ComPHPPuebla.github.io/easy-forms/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://ComPHPPuebla.github.io/easy-forms/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://ComPHPPuebla.github.io/easy-forms/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="http://ComPHPPuebla.github.io/easy-forms/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="http://ComPHPPuebla.github.io/easy-forms/">
                Easy form handling for PHP
                <small class="hidden-xs hidden-sm">
                    Decoupled form processing
                </small>
            </a>

            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                                                    <p class="text-muted">
                                Easy Form
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/installation.html">
                                            Installation
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/creating-elements.html">
                                            Creating form elements
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/creating-forms.html">
                                            Creating forms
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/validating-forms.html">
                                            Validating forms
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/rendering-forms.html">
                                            Rendering forms
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/csrf-tokens.html">
                                            CSRF tokens
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/captcha-elements.html">
                                            CAPTCHA elements
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/dynamic-modification.html">
                                            Dynamic modification
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://ComPHPPuebla.github.io/easy-forms/docs/code-generation.html">
                                            Generating code
                                        </a>
                                    </li>
                                                            </ul>
                        
                    </nav>

                
                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1>Rendering forms</h1>
<p>This package uses Twig and is heavily inspired by the way the Symfony2 form
component renders a form. Form rendering can be customized through <em>themes</em>. A
theme is a set of Twig templates which contain <em>blocks</em> to customize the way a
form element is rendered.</p>
<p>A form element is rendered in three parts:</p>
<ul>
<li>A label</li>
<li>The HTML element</li>
<li>Its error messages, if any</li>
</ul>
<p>This package has 2 built-in themes:</p>
<ul>
<li>The default layout, which groups form elements in divs</li>
<li>The Bootstrap 3 layout which extends the default layout</li>
</ul>
<p>In order to use the themes you have to register the <code>FormExtension</code> provided in
this package.</p>
<pre><code class="language-php">use EasyForms\Bridges\Twig\BlockOptions;
use EasyForms\Bridges\Twig\FormExtension;
use EasyForms\Bridges\Twig\FormRenderer;
use EasyForms\Bridges\Twig\FormTheme;

$loader = new Twig_Loader([
    // Path to themes
    'vendor/comphppuebla/easy-forms/src/EasyForms/Bridges/Twig',
    'path/to/your/application/templates',
]);
$twig = new Twig_Environment($loader);
// use the Bootstrap 3 layout
$renderer = new FormRenderer(
    new FormTheme($twig, 'layouts/bootstrap.html.twig'),
    new BlockOptions()
);
$twig-&gt;addExtension(new FormExtension($renderer));</code></pre>
<p>Once you have the form extension configured, you can pass your form to any Twig
template.</p>
<pre><code class="language-php">$view-&gt;render('user/login.html.twig', [
    'form' =&gt; $loginForm-&gt;buildView(),
]);</code></pre>
<p>The extension defines some functions, among the most important are <code>form_start</code>,
<code>form_end</code>, and <code>element_row</code>.</p>
<p>The <code>element_row</code> defines 2 parameters, the form element, and an associative array
of options. The options are not mandatory, and can be explained as follows:</p>
<ul>
<li><code>label</code>. The element 's label</li>
<li><code>label_attr</code>. The label's HTML attributes</li>
<li><code>attr</code>. The elements HTML  attributes</li>
<li><code>options</code>. This one is used mainly to override the default blocks that render the
elements (label, element and error messages, among others).</li>
</ul>
<p>In the following example we use the options to define the elements labels, and its
HTML IDs which could be used for client side validation, for instance.</p>
<pre><code class="language-twig">{{ form_start(login) }}
{{ element_row(login.username, {'label': 'Username', 'attr': {'id': 'username'}}) }}
{{ element_row(login.password, {'label': 'Password', 'attr': {'id': 'password'}}) }}
&lt;button type="submit" class="btn btn-default"&gt;
    &lt;span class="glyphicon glyphicon-home"&gt;&lt;/span&gt; Login
&lt;/button&gt;
{{ form_end() }}</code></pre>
<p>If you want to display a form element in a different way in only one template, you
need to do 3 things:</p>
<ol>
<li>Add the template that renders the form to the current theme</li>
<li>Define a custom block for your element</li>
<li>Override the block in the <code>options</code> parameter when calling <code>element_row</code></li>
</ol>
<p>Suppose you have a <code>ProductForm</code> class with 3 form elements, a text element with the
name of the product, a text area with an optional description, and another text
element to enter a unit price. To add the current template to the theme you will need
to use the <code>form_theme</code> token and pass the value <code>self</code> as argument, you can add more
than one template this way, therefore the value should be inside an array.</p>
<pre><code class="language-twig">{# Add this template to the theme #}
{% form_theme [_self] %}

{# Custom block #}
{%- block money -%}
    &lt;div class="input-group"&gt;&lt;div class="input-group-addon"&gt;$&lt;/div&gt;
        {%- set options = options|merge({'block': 'input'}) -%}
        {{- element(element, attr, options) -}}
    &lt;div class="input-group-addon"&gt;.00&lt;/div&gt;&lt;/div&gt;
{%- endblock money -%}

{{ form_start(form) }}
{{ element_row(form.name, {'label': 'Name', 'attr': {'id': 'name'}}) }}

{# Override the element's default block, use 'money' instead #}
{{ element_row(form.unitPrice, {'label': 'Price', 'options': {'block': 'money'}}) }}

&lt;button type="submit" class="btn btn-default"&gt;
    &lt;span class="glyphicon glyphicon-th-list"&gt;&lt;/span&gt; Add to catalog
&lt;/button&gt;
{{ form_end() }}</code></pre>
<p>If you want more control to render your form elements you could use the functions
<code>label</code>, <code>element</code>, and <code>errors</code> each renders what its says. Then, we could render
the <code>name</code> element as follows.</p>
<pre><code class="language-twig">&lt;div&gt;
    {# Arguments: element, label, element ID, HTML attributes #}
    {{- label(element, 'Name', 'name', {'class' =&gt; 'element-label'}) -}}
    {# Arguments: element, HTML attributes, element options #}
    {{- element(element, {'class' =&gt; 'form-element'}, {'block': 'money'}) -}}
    {{- errors(element) -}}
&lt;/div&gt;</code></pre>
<p>Another useful function is <code>form_rest</code> which renders all the elements of a form
that haven't been rendered. This function does not need arguments, that's why
it is recommended to use it only with elements that do not need special
formatting or labels, like <code>hidden</code> elements. Then instead of rendering
<code>productId</code> and <code>csrf</code> which are hidden elements in the following form.</p>
<pre><code class="language-twig">{{ form_start(form) }}

{{ element_row(form.name, {'label': 'Name', 'attr': {'id': 'name'}}) }}
{{ element_row(form.unitPrice, {'label': 'Price', 'attr': {'id': 'price'}}) }}

{{ element_row(form.productId) }} {# this is a hidden element #}
{{ element_row(form.csrf) }} {# this is a hidden element with a CSRF token #}

&lt;button type="submit" class="btn btn-default"&gt;
    &lt;span class="glyphicon glyphicon-th-list"&gt;&lt;/span&gt; Add to catalog
&lt;/button&gt;
{{ form_end() }}</code></pre>
<p>We could use <code>form_rest</code> instead</p>
<pre><code class="language-twig">{{ form_start(form) }}

{{ element_row(form.name, {'label': 'Name', 'attr': {'id': 'name'}}) }}
{{ element_row(form.unitPrice, {'label': 'Price', 'attr': {'id': 'price'}}) }}

{{ form_rest(form) }} {# Render the hidden elements in one call #}

&lt;button type="submit" class="btn btn-default"&gt;
    &lt;span class="glyphicon glyphicon-th-list"&gt;&lt;/span&gt; Add to catalog
&lt;/button&gt;
{{ form_end() }}</code></pre>
                </section>

            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
